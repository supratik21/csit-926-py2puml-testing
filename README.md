<div align="center">
  <a href="" target="_blank">
    <img width="350px" alt="Python Testing logo"
      src="https://blog.testproject.io/wp-content/uploads/2020/06/16-10-C.jpg" />
  </a>
  <h1>Py2puml Testing Suite</h1>
</div>

This Testing Suite is a project designed to thoroughly test the functionality and reliability of the Py2Puml tool, which generates UML diagrams from Python code.


# How it works

This Testing Suite is implemented using popular testing frameworks and libraries in the Python ecosystem, such as:
-	Unittest 
- Pytest 
-	Hypothesis 
-	Pytest-benchmark 
-	Pynguin 
-	Robot Framework

It leverages assertions, test fixtures, and libraries offered by the above toolset to define and run test cases, enabling automated and systematic testing of Py2Puml's functionality.

## Features

The repository contains the Py2Puml Testing Suite, which includes a comprehensive set of test cases to ensure the accuracy, reliability, and functionality of the Py2Puml tool. The repository's `/tests` directory contains various subdirectories, each focusing on specific features and aspects of Py2Puml. Here's a summary of the main directories and files:

- **`/tests/py2puml`**: This directory serves as the main directory for Py2Puml tests. It contains multiple subdirectories, each representing a specific feature or behavior being tested in Py2Puml. Some of the directories within `/tests/py2puml` include:

  - `basicclass`: Tests the generation of UML class diagrams for simple Python classes.
  - `checkconstructor`: Ensures that Py2Puml correctly handles class constructors and represents them in UML diagrams.
  - `checkdecorator`: Verifies the correct handling of decorators applied to classes and their impact on UML diagrams.
  - `checkdocstring`: Tests the extraction and representation of docstrings within Python classes in the generated UML diagrams.
  - `checkinheritance`: Validates the accurate representation of inheritance relationships between classes.
  - ... (and other directories representing different features)

- **`/tests/asserts`**: Contains test cases to verify the correctness and accuracy of assertions used within the Py2Puml Testing Suite.

- **`/tests/modules`**: Includes test cases to assess the handling and behavior of Python modules within Py2Puml, specifically focusing on how dependencies between modules are extracted and represented in the generated UML diagrams.

- **`/tests/puml_files`**: Contains test cases to ensure the correctness and completeness of the PlantUML files generated by Py2Puml, which represent the Python code and its relationships in UML diagrams.

Additionally, there are various files within the `/tests` directory that provide test utilities and configurations. These files include `conftest.py`, `test__init__.py`, `test__main__.py`, `test_cli.py`, `test_example.py`, `test_modules.py`, `test_py2puml.py`, and `test_utils.py`.

Overall, the Py2Puml Testing Suite employs a range of testing frameworks, libraries, and test cases to thoroughly assess the functionality of Py2Puml and ensure accurate UML diagram generation from Python code.

# Install

Install Pandas from [PyPI](https://pypi.org/project/pandas/):

* with `pip`:

```sh
pip install pandas
```

Install Numpy from [PyPI](https://pypi.org/project/numpy/):

* with `pip`:

```sh
pip install numpy
```

Install PyTest from [PyPI](https://pypi.org/project/pytest/):

* with `pip`:

```sh
pip install pytest
```

Install UnitTest from [PyPI](https://pypi.org/project/unittest/):

* with `pip`:

```sh
pip install unittest
```

Install Pynguin from [PyPI](https://pypi.org/project/pynguin/):

* with `pip`:

```sh
pip install pynguin
```

Install Hypothesis from [PyPI](https://pypi.org/project/hypothesis/):

* with `pip`:

```sh
pip install hypothesis
```

Install RobotFramework from [PyPI](https://pypi.org/project/robotframework/):

* with `pip`:

```sh
pip install robotframework
```

Install Py2puml from [PyPI](https://pypi.org/project/py2puml/):

* with `pip`:

```sh
pip install py2puml
```

Install Coverage from [coverage](https://coverage.readthedocs.io/en/7.2.5/):

* with `pip`:

```sh
pip install coverage
```

Install Pytest-Benchmark from [PyPI](https://pypi.org/project/pytest-benchmark/):

* with `pip`:

```sh
pip install pytest-benchmark
```

Install Pygal from [PyPI](https://pypi.org/project/pygal/):
* with `pip`:

```sh
pip install pygal
```
# Usage

## CLI

Upon successful installation of all the required dependencies, the execution of all test cases can be accomplished by invoking the `pytest` command.

```sh
\py2puml>pytest
```

This outputs the following test case content:

```plantuml
================================================================== test session starts ==================================================================
platform win32 -- Python 3.11.1, pytest-7.3.0, pluggy-1.0.0
benchmark: 4.0.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: C:\Users\sumit\Desktop\StudyDocs\FinalTestFile\Prod\py2puml
configfile: pyproject.toml
testpaths: tests
plugins: hypothesis-6.74.1, benchmark-4.0.0, cov-4.0.0
collected 1176 items

tests\test_asserts.py .                                                                                                                       [   1/1176] 
tests\asserts\test_attribute.py ............................................................................................................. [ 110/1176]
............................................................................................................................................. [ 251/1176]
......................................                                                                                                        [ 289/1176]
tests\asserts\test_relation.py .............................................................................................................. [ 399/1176]
.............................................                                                                                                 [ 444/1176]
tests\asserts\test_variable.py .............................................................................................................. [ 554/1176]
.........................                                                                                                                     [ 579/1176]
tests\py2puml\test__init__.py ..                                                                                                              [ 581/1176]
tests\py2puml\test__main__.py ..............                                                                                                  [ 595/1176]
tests\py2puml\test_cli.py ...................                                                                                                 [ 614/1176]
tests\py2puml\test_example.py ..................................                                                                              [ 648/1176]
tests\py2puml\test_modules.py ......                                                                                                          [ 654/1176] 
tests\py2puml\test_py2puml.py ...........................F................................................................................... [ 765/1176]
...................                                                                                                                           [ 784/1176]
tests\py2puml\test_utils.py ....                                                                                                              [ 788/1176]
tests\py2puml\domain\test_package.py ............                                                                                             [ 800/1176]
tests\py2puml\domain\test_umlclass.py ................                                                                                        [ 816/1176]
tests\py2puml\domain\test_umlenum.py .............                                                                                            [ 829/1176]
tests\py2puml\domain\test_umlitem.py ...................                                                                                      [ 848/1176]
tests\py2puml\domain\test_umlrelation.py ................                                                                                     [ 864/1176]
tests\py2puml\export\test_namespace.py .......................                                                                                [ 887/1176]
tests\py2puml\export\test_puml.py ......                                                                                                      [ 893/1176]
tests\py2puml\inspection\test_inspectclass.py ............................................................................................... [ 988/1176]
..............................................................................                                                                [1066/1176]
tests\py2puml\inspection\test_inspectdataclass.py ...                                                                                         [1069/1176] 
tests\py2puml\inspection\test_inspectenum.py ......                                                                                           [1075/1176]
tests\py2puml\inspection\test_inspectmodule.py ........                                                                                       [1083/1176] 
tests\py2puml\inspection\test_inspectnamedtuple.py .....                                                                                      [1088/1176]
tests\py2puml\inspection\test_inspectpackage.py .....                                                                                         [1093/1176]
tests\py2puml\parsing\test_astvisitors.py ..........................................                                                          [1135/1176]
tests\py2puml\parsing\test_compoundtypesplitter.py .............................                                                              [1164/1176]
tests\py2puml\parsing\test_moduleresolver.py ......                                                                                           [1170/1176]
tests\py2puml\parsing\test_parseclassconstructor.py ......

```

To execute a specific test case, it is necessary to explicitly specify the name of the desired test case alongside the 'pytest' command
```sh
pytest tests/py2puml/domain/test_umlitem.py    
```
The resulting output will appear in the following format:
![py2puml domain UML Diagram](https://github.com/supratik21/csit-926-py2puml-testing/blob/main/Images/test_image1.PNG)

For a full coveragre report, run:

```sh
coverage run --source=py2puml --module pytest --verbose tests
```

For generating the coverage in html format

```sh
coverage html
```

The generated output will be displayed in the form of an HTML report, which can be accessed through the 'index.html' file located in the 'htmlcov' folder present in parent directory of the project. A sample of the coverage report looks like - 

![py2puml domain UML Diagram](https://github.com/supratik21/csit-926-py2puml-testing/blob/main/Images/CoverageReport_After.PNG)

# Contributions

* [Luc Sorel-Giffo](https://github.com/lucsorel)
* [Doyou Jung](https://github.com/doyou89)
* [Julien Jerphanion](https://github.com/jjerphan)
* [Luis Fernando Villanueva Pérez](https://github.com/jonykalavera)

Pull-requests are welcome and will be processed on a best-effort basis.
Follow the [contributing guide](CONTRIBUTING.md).

# Current limitations

According to the contributors of Py2puml, it has been confirmed that the tool is intended to be utilized as a developmental library within a Python project rather than as a system tool. More details on this limitation can be found here- https://github.com/lucsorel/py2puml/issues/46. Consequently, it is imperative to arrange the Python classes appropriately to ensure their proper representation in the class diagrams generated by PlantUML. For additional insights into the limitations of Py2puml itself, I would recommend referring to the following link: https://github.com/lucsorel/py2puml/blob/main/README.md#current-limitations.

By acknowledging these guidelines and understanding the specific nature of Py2puml's usage, developers can effectively leverage this tool within their Python projects, facilitating the generation of accurate and comprehensive class diagrams with the aid of PlantUML.

# Alternatives

If `py2puml` does not meet your needs (suggestions and pull-requests are **welcome**), you can have a look at these projects which follow other approaches (AST, linting, modeling):

* [pyreverse](https://pylint.pycqa.org/en/latest/additional_commands/index.html#pyreverse), which includes a PlantUML printer [since version 2.10.0](https://pylint.pycqa.org/en/latest/whatsnew/changelog.html?highlight=plantuml#what-s-new-in-pylint-2-10-0)
* [cb109/pyplantuml](https://github.com/cb109/pyplantuml)
* [deadbok/py-puml-tools](https://github.com/deadbok/py-puml-tools)
* [caballero/genUML](https://github.com/jose-caballero/genUML)
# csit-926-py2puml-testing
